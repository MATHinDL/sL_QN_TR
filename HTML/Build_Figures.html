<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><meta name="generator" content="MATLAB 2021a"><title>To compare sL-SR1-TR and sL-BFGS-TR</title><style type="text/css">.rtcContent { padding: 30px; } .S0 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 28.8px; min-height: 0px; white-space: pre-wrap; color: rgb(213, 80, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 24px; font-weight: 400; text-align: left;  }
.S1 { margin: 2px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }
.S2 { margin: 15px 10px 5px 4px; padding: 0px; line-height: 28.8px; min-height: 0px; white-space: pre-wrap; color: rgb(213, 80, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 24px; font-weight: 400; text-align: left;  }
.S3 { margin: 20px 10px 5px 4px; padding: 0px; line-height: 20px; min-height: 0px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 20px; font-weight: 700; text-align: left;  }
.S4 { margin: 15px 10px 5px 4px; padding: 0px; line-height: 18px; min-height: 0px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 17px; font-weight: 700; text-align: left;  }
.CodeBlock { background-color: #F7F7F7; margin: 10px 0 10px 0;}
.S5 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 1px solid rgb(233, 233, 233); border-bottom: 0px none rgb(0, 0, 0); border-radius: 4px 4px 0px 0px; padding: 6px 45px 0px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S6 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 0px none rgb(0, 0, 0); border-radius: 0px; padding: 0px 45px 0px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S7 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 1px solid rgb(233, 233, 233); border-radius: 0px 0px 4px 4px; padding: 0px 45px 4px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S8 { margin: 10px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }</style></head><body><div class = rtcContent><h1  class = 'S0'><span style=' font-weight: bold;'>To compare</span><span> </span><span style=' font-weight: bold;'>sL-SR1-TR and sL-BFGS-TR</span></h1><div  class = 'S1'><span style=' font-weight: bold;'></span></div><h1  class = 'S2'><span style=' font-weight: bold;'>Method 1:</span></h1><div  class = 'S1'><span>To monitor the behavior of methods during training, we can use following statements for both </span><span style=' font-family: monospace;'>sL_SR1_TR.m </span><span>(or </span><span style=' font-family: monospace;'>sL_SR1_TR_noBN.m</span><span>)</span><span style=' font-family: monospace;'> and sL_BFGS_TR.m </span><span>(or </span><span style=' font-family: monospace;'>sL_BFGS_TR_noBN.m</span><span>). </span></div><h2  class = 'S3'><span style=' font-weight: bold;'>Example:</span></h2><div  class = 'S1'><span>Let </span><span style=' font-family: monospace;'>os = 500</span><span> and </span><span style=' font-family: monospace;'>frequency = 50</span><span>. Given Cifar10 with ConvNet3FC2 in</span><span style=' font-weight: bold;'> </span><span style=' font-family: monospace;'>sL_BFGS_TR.m </span><span>and</span><span style=' font-family: monospace;'> sL_SR1_TR.m, </span><span>follow the steps below:</span></div><h3  class = 'S4'><span style=' font-weight: bold;'>1. Create figures: use these statements before main loop</span></h3><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre"><span >plot_Train_Loss = </span><span style="color: rgb(170, 4, 249);">"Yes"</span><span >;</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">if </span><span >plot_Train_Loss == </span><span style="color: rgb(170, 4, 249);">"Yes"</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    figure(2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    aniTrainLoss     = animatedline(</span><span style="color: rgb(170, 4, 249);">'Color'</span><span >,</span><span style="color: rgb(170, 4, 249);">'r'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    aniTestLoss      = animatedline(</span><span style="color: rgb(170, 4, 249);">'Color'</span><span >, </span><span style="color: rgb(170, 4, 249);">'b'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    ylim([-inf inf])</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    xlabel(</span><span style="color: rgb(170, 4, 249);">"Iteration"</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    ylabel(</span><span style="color: rgb(170, 4, 249);">"Loss"</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    legend(</span><span style="color: rgb(170, 4, 249);">"Train"</span><span >, </span><span style="color: rgb(170, 4, 249);">"Validation"</span><span >, </span><span style="color: rgb(170, 4, 249);">'Location'</span><span >,</span><span style="color: rgb(170, 4, 249);">"bestoutside"</span><span >,</span><span style="color: rgb(170, 4, 249);">'Orientation'</span><span >,</span><span style="color: rgb(170, 4, 249);">'horizontal'</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    grid </span><span style="color: rgb(170, 4, 249);">on</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >plot_Train_Accuracy = </span><span style="color: rgb(170, 4, 249);">"Yes"</span><span >;</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">if </span><span >plot_Train_Accuracy == </span><span style="color: rgb(170, 4, 249);">"Yes"</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    figure(3)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    aniTrainAcc      = animatedline(</span><span style="color: rgb(170, 4, 249);">'Color'</span><span >,</span><span style="color: rgb(170, 4, 249);">'r'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    aniTestAcc       = animatedline(</span><span style="color: rgb(170, 4, 249);">'Color'</span><span >, </span><span style="color: rgb(170, 4, 249);">'b'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    ylim([0 inf])</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    xlabel(</span><span style="color: rgb(170, 4, 249);">"Iteration"</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    ylabel(</span><span style="color: rgb(170, 4, 249);">"Accuracy (%)"</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    legend(</span><span style="color: rgb(170, 4, 249);">"Train"</span><span >, </span><span style="color: rgb(170, 4, 249);">"Validation"</span><span >, </span><span style="color: rgb(170, 4, 249);">'Location'</span><span >,</span><span style="color: rgb(170, 4, 249);">"bestoutside"</span><span >,</span><span style="color: rgb(170, 4, 249);">"Orientation"</span><span >,</span><span style="color: rgb(170, 4, 249);">"horizontal"</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    grid </span><span style="color: rgb(170, 4, 249);">on</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">end</span></span></div></div></div><h3  class = 'S4'><span style=' font-weight: bold;'>2. Add computed quanteties to figures: use these statements in the main loop, after evaluation the network</span></h3><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">if </span><span >( (k+1) == 1 || mod(k+1, frequency) == 0 || mod(k+1, Nb) == 0)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    D  = duration( 0, 0, toc(start), </span><span style="color: rgb(170, 4, 249);">'Format'</span><span >, </span><span style="color: rgb(170, 4, 249);">'hh:mm:ss' </span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    </span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    </span><span style="color: rgb(2, 128, 9);">%-----------------------------&gt; Train</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    </span><span style="color: rgb(14, 0, 255);">if </span><span >plot_Train_Loss == </span><span style="color: rgb(170, 4, 249);">"Yes"</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        </span><span style="color: rgb(2, 128, 9);">% training loss</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        figure(2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        addpoints( aniTrainLoss, k, f )</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        title( </span><span style="color: rgb(170, 4, 249);">"Number of Iterations: " </span><span >+ (k) + </span><span style="color: rgb(170, 4, 249);">", Elapsed Time: " </span><span >+ string(D) )</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        drawnow</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        </span><span style="color: rgb(2, 128, 9);">% epoch separator</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        </span><span style="color: rgb(14, 0, 255);">if </span><span >mod(k+1,Nb) == 0</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >            xline(k, </span><span style="color: rgb(170, 4, 249);">':'</span><span >, num2str((k+1)/Nb), </span><span style="color: rgb(170, 4, 249);">'HandleVisibility'</span><span >,</span><span style="color: rgb(170, 4, 249);">'off'</span><span >, </span><span style="color: rgb(170, 4, 249);">'LabelHorizontalAlignment'</span><span >, </span><span style="color: rgb(170, 4, 249);">'center'</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        </span><span style="color: rgb(14, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    </span><span style="color: rgb(14, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    </span><span style="color: rgb(14, 0, 255);">if </span><span >plot_Train_Accuracy == </span><span style="color: rgb(170, 4, 249);">"Yes"</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        </span><span style="color: rgb(2, 128, 9);">% training accuracy</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        figure(3)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        addpoints( aniTrainAcc, k, acc )</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        title( </span><span style="color: rgb(170, 4, 249);">"Number of Iterations: " </span><span >+ (k) + </span><span style="color: rgb(170, 4, 249);">", Elapsed Time: " </span><span >+ string(D) )</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        drawnow</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        </span><span style="color: rgb(2, 128, 9);">% epoch separator</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        </span><span style="color: rgb(14, 0, 255);">if </span><span >mod(k+1,Nb) == 0</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >            xline(k, </span><span style="color: rgb(170, 4, 249);">':'</span><span >, num2str((k+1)/Nb), </span><span style="color: rgb(170, 4, 249);">'HandleVisibility'</span><span >,</span><span style="color: rgb(170, 4, 249);">'off'</span><span >, </span><span style="color: rgb(170, 4, 249);">'LabelHorizontalAlignment'</span><span >, </span><span style="color: rgb(170, 4, 249);">'center'</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        </span><span style="color: rgb(14, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    </span><span style="color: rgb(14, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    </span><span style="color: rgb(2, 128, 9);">%-----------------------------&gt; Test</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    figure(2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    </span><span style="color: rgb(2, 128, 9);">% testing loss</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    addpoints(  aniTestLoss , k, f_test )</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    drawnow</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    figure(3)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    </span><span style="color: rgb(2, 128, 9);">% testing accuracy</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    addpoints( aniTestAcc, k, acc_test )</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    drawnow</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">end</span></span></div></div></div><div  class = 'S8'><span style=' font-weight: bold;'></span></div><h1  class = 'S2'><span style=' font-weight: bold;'>Method 2:</span></h1><div  class = 'S1'><span>To monitor the behavior of methods after the end of training, we can also use following statements for both </span><span style=' font-family: monospace;'>sL_SR1_TR.m </span><span>(or </span><span style=' font-family: monospace;'>sL_SR1_TR_noBN.m</span><span>)</span><span style=' font-family: monospace;'> and sL_BFGS_TR.m </span><span>(or </span><span style=' font-family: monospace;'>sL_BFGS_TR_noBN.m</span><span>).  </span></div><h2  class = 'S3'><span style=' font-weight: bold;'>Example:</span></h2><div  class = 'S1'><span>Let </span><span style=' font-family: monospace;'>os = 500</span><span> and </span><span style=' font-family: monospace;'>frequency = 50</span><span>. Given Cifar10 with ConvNet3FC2 in</span><span style=' font-weight: bold;'> </span><span style=' font-family: monospace;'>sL_BFGS_TR.m </span><span>and</span><span style=' font-family: monospace;'> sL_SR1_TR.m, </span><span>follow the steps below:</span></div><h3  class = 'S4'><span style=' font-weight: bold;'>1. Save information in </span><span style=' font-weight: bold; font-family: monospace;'>.mat </span><span style=' font-weight: bold;'>with specific names as you wish</span></h3><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">% after running sL_SR1_TR.m</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >save(</span><span style="color: rgb(170, 4, 249);">'Info\INFO_LSR1\os500_F.mat'</span><span >    ,</span><span style="color: rgb(170, 4, 249);">'F'</span><span >)       </span><span style="color: rgb(2, 128, 9);">% Overal loss of training</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >save(</span><span style="color: rgb(170, 4, 249);">'Info\INFO_LSR1\os500_F_t.mat'</span><span >  ,</span><span style="color: rgb(170, 4, 249);">'F_t'</span><span >)     </span><span style="color: rgb(2, 128, 9);">% Overal loss of testing</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >save(</span><span style="color: rgb(170, 4, 249);">'Info\INFO_LSR1\os500_Acc.mat'</span><span >  ,</span><span style="color: rgb(170, 4, 249);">'Acc'</span><span >)     </span><span style="color: rgb(2, 128, 9);">% Accuracy of training</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >save(</span><span style="color: rgb(170, 4, 249);">'Info\INFO_LSR1\os500_Acc_t.mat'</span><span >,</span><span style="color: rgb(170, 4, 249);">'Acc_t'</span><span >)   </span><span style="color: rgb(2, 128, 9);">% Accuracy of testing</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >save(</span><span style="color: rgb(170, 4, 249);">'Info\INFO_LSR1\os500_Time.mat' </span><span >,</span><span style="color: rgb(170, 4, 249);">'Time'</span><span >)    </span><span style="color: rgb(2, 128, 9);">% total time (training + testing)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">% after running sL_BFGS_TR.m</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >save(</span><span style="color: rgb(170, 4, 249);">'Info\INFO_LBFGS\os500_F_.mat'</span><span >   ,</span><span style="color: rgb(170, 4, 249);">'F'</span><span >)      </span><span style="color: rgb(2, 128, 9);">% Overal loss of training</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >save(</span><span style="color: rgb(170, 4, 249);">'Info\INFO_LBFGS\os500_F_t.mat'</span><span >  ,</span><span style="color: rgb(170, 4, 249);">'F_t'</span><span >)    </span><span style="color: rgb(2, 128, 9);">% Overal loss of testing</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >save(</span><span style="color: rgb(170, 4, 249);">'Info\INFO_LBFGS\os500_Acc.mat'</span><span >  ,</span><span style="color: rgb(170, 4, 249);">'Acc'</span><span >)    </span><span style="color: rgb(2, 128, 9);">% Accuracy of training</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >save(</span><span style="color: rgb(170, 4, 249);">'Info\INFO_LBFGS\os500_Acc_t.mat'</span><span >,</span><span style="color: rgb(170, 4, 249);">'Acc_t'</span><span >)  </span><span style="color: rgb(2, 128, 9);">% Accuracy of testing</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >save(</span><span style="color: rgb(170, 4, 249);">'Info\INFO_LBFGS\os500_Time.mat' </span><span >,</span><span style="color: rgb(170, 4, 249);">'Time'</span><span >)   </span><span style="color: rgb(2, 128, 9);">% total time (training + testing)</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'></div></div></div><h3  class = 'S4'><span style=' font-weight: bold;'>2. Produce figures</span></h3><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">% For the example, set:</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >os        = 500; </span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >bs        = 2*os;</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >epoch     = 10;</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >frequency = 50;</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >N         = 50000; </span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">% Specify the path of saved information: (It depends on your own path.)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >cd </span><span style="color: rgb(170, 4, 249);">E:\sL_QR_TR\Info</span><span >  </span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">%=================================================================</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">% SR1</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">%=================================================================</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >old = cd; cd </span><span style="color: rgb(170, 4, 249);">INFO_LSR1</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">if </span><span >os == 50</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os50_F.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os50_F_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os50_Acc.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os50_Acc_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os50_Time.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">elseif </span><span >os == 250</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os250_F.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os250_F_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os250_Acc.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os250_Acc_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os250_Time.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">elseif </span><span >os == 500</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os500_F.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os500_F_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os500_Acc.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os500_Acc_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os500_Time.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">elseif </span><span >os == 2500</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os2500_F.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os2500_F_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os2500_Acc.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os2500_Acc_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os2500_Time.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >Nb = floor(N/os)-1;</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">for </span><span >k = 1 : length(F_)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    </span><span style="color: rgb(14, 0, 255);">if </span><span >k==1 || mod(k,frequency) == 0 || mod(k,Nb) == 0</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        d(1, k) = k/(Nb);      </span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    </span><span style="color: rgb(14, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >pos = find(d &gt; 0); x = d(pos); clear </span><span style="color: rgb(170, 4, 249);">d</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >figure(2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >plot(x, F_(pos), </span><span style="color: rgb(170, 4, 249);">'-r'</span><span >, </span><span style="color: rgb(170, 4, 249);">'LineWidth'</span><span >,2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >hold </span><span style="color: rgb(170, 4, 249);">on </span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >plot(x, F_t(pos), </span><span style="color: rgb(170, 4, 249);">'--r'</span><span >, </span><span style="color: rgb(170, 4, 249);">'LineWidth'</span><span >,2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >figure(3)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >plot(x, Acc_(pos), </span><span style="color: rgb(170, 4, 249);">'-r'</span><span >, </span><span style="color: rgb(170, 4, 249);">'LineWidth'</span><span >,2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >hold </span><span style="color: rgb(170, 4, 249);">on </span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >plot(x, Acc_t(pos), </span><span style="color: rgb(170, 4, 249);">'--r'</span><span >, </span><span style="color: rgb(170, 4, 249);">'LineWidth'</span><span >,2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >figure(4)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >plot(Time_(pos), Acc_(pos), </span><span style="color: rgb(170, 4, 249);">'-r'</span><span >, </span><span style="color: rgb(170, 4, 249);">'LineWidth'</span><span >,2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >hold </span><span style="color: rgb(170, 4, 249);">on</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >plot(Time_(pos), Acc_t(pos), </span><span style="color: rgb(170, 4, 249);">'--r'</span><span >, </span><span style="color: rgb(170, 4, 249);">'LineWidth'</span><span >,2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">%=================================================================</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">% BFGS</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(2, 128, 9);">%=================================================================</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >cd(old), cd  </span><span style="color: rgb(170, 4, 249);">INFO_LBFGS</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">if </span><span >os == 50</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os50_F.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os50_F_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os50_Acc.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os50_Acc_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os50_Acc_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os50_Time.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">elseif </span><span >os == 250</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os250_F.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os250_F_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os250_Acc.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os250_Acc_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os250_Time.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">elseif </span><span >os == 500</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os500_F.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os500_F_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os500_Acc.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os500_Acc_t.mat </span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os500_Time.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">elseif </span><span >os == 2500</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os2500_F.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os2500_F_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os2500_Acc.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os2500_Acc_t.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    load </span><span style="color: rgb(170, 4, 249);">os2500_Time.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >Nb = floor(N/os)-1;</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">for </span><span >k = 1 : length(F_)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    </span><span style="color: rgb(14, 0, 255);">if </span><span >k==1 || mod(k,frequency) == 0 || mod(k,Nb) == 0</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >        d(1, k) = k/Nb;      </span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >    </span><span style="color: rgb(14, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span style="color: rgb(14, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >pos = find(d &gt; 0); x = d(pos); clear </span><span style="color: rgb(170, 4, 249);">d</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >figure(2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >hold </span><span style="color: rgb(170, 4, 249);">on</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >plot(x, F_(pos), </span><span style="color: rgb(170, 4, 249);">'-b'</span><span >, </span><span style="color: rgb(170, 4, 249);">'LineWidth'</span><span >,2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >hold </span><span style="color: rgb(170, 4, 249);">on </span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >plot(x, F_t(pos), </span><span style="color: rgb(170, 4, 249);">'--b'</span><span >, </span><span style="color: rgb(170, 4, 249);">'LineWidth'</span><span >,2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >set(gca, </span><span style="color: rgb(170, 4, 249);">'FontSize'</span><span >,24,</span><span style="color: rgb(170, 4, 249);">'FontWeight'</span><span >,</span><span style="color: rgb(170, 4, 249);">'Bold'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >grid </span><span style="color: rgb(170, 4, 249);">on</span><span >, box </span><span style="color: rgb(170, 4, 249);">on</span><span >, xlabel(</span><span style="color: rgb(170, 4, 249);">'Epoch'</span><span >), ylabel(</span><span style="color: rgb(170, 4, 249);">'Loss'</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >title([</span><span style="color: rgb(170, 4, 249);">'Batch size: '</span><span >, num2str(bs),</span><span style="color: rgb(170, 4, 249);">', '</span><span >, </span><span style="color: rgb(170, 4, 249);">'Display frequency: '</span><span >, num2str(frequency)])</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >legend(</span><span style="color: rgb(170, 4, 249);">'sL-SR1-TR (train)'</span><span >,</span><span style="color: rgb(170, 4, 249);">'sL-SR1-TR (test)'</span><span >,</span><span style="color: rgb(170, 4, 249);">'sL-BFGS-TR (train)'</span><span >,</span><span style="color: rgb(170, 4, 249);">'sL-BFGS-TR (test)'</span><span >, </span><span style="color: rgb(170, 4, 249);">'Location'</span><span >,</span><span style="color: rgb(170, 4, 249);">"best"</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >figure(3)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >hold </span><span style="color: rgb(170, 4, 249);">on</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >plot(x, Acc_(pos), </span><span style="color: rgb(170, 4, 249);">'-b'</span><span >, </span><span style="color: rgb(170, 4, 249);">'LineWidth'</span><span >,2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >hold </span><span style="color: rgb(170, 4, 249);">on </span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >plot(x, Acc_t(pos), </span><span style="color: rgb(170, 4, 249);">'--b'</span><span >, </span><span style="color: rgb(170, 4, 249);">'LineWidth'</span><span >,2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >set(gca, </span><span style="color: rgb(170, 4, 249);">'FontSize'</span><span >,24,</span><span style="color: rgb(170, 4, 249);">'FontWeight'</span><span >,</span><span style="color: rgb(170, 4, 249);">'Bold'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >grid </span><span style="color: rgb(170, 4, 249);">on</span><span >, box </span><span style="color: rgb(170, 4, 249);">on</span><span >, xlabel(</span><span style="color: rgb(170, 4, 249);">'Epoch'</span><span >), ylabel(</span><span style="color: rgb(170, 4, 249);">'Accuracy'</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >title([</span><span style="color: rgb(170, 4, 249);">'Batch size: '</span><span >, num2str(bs),</span><span style="color: rgb(170, 4, 249);">', '</span><span >, </span><span style="color: rgb(170, 4, 249);">'Display frequency: '</span><span >, num2str(frequency)])</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >legend(</span><span style="color: rgb(170, 4, 249);">'sL-SR1-TR (train)'</span><span >,</span><span style="color: rgb(170, 4, 249);">'sL-SR1-TR (test)'</span><span >,</span><span style="color: rgb(170, 4, 249);">'sL-BFGS-TR (train)'</span><span >,</span><span style="color: rgb(170, 4, 249);">'sL-BFGS-TR (test)'</span><span >, </span><span style="color: rgb(170, 4, 249);">'Location'</span><span >,</span><span style="color: rgb(170, 4, 249);">"best"</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >figure(4)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >hold </span><span style="color: rgb(170, 4, 249);">on</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >plot(Time_(pos), Acc_(pos), </span><span style="color: rgb(170, 4, 249);">'-b'</span><span >, </span><span style="color: rgb(170, 4, 249);">'LineWidth'</span><span >,2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >hold </span><span style="color: rgb(170, 4, 249);">on</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >plot(Time_(pos), Acc_t(pos), </span><span style="color: rgb(170, 4, 249);">'--b'</span><span >, </span><span style="color: rgb(170, 4, 249);">'LineWidth'</span><span >,2)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >set(gca, </span><span style="color: rgb(170, 4, 249);">'FontSize'</span><span >,24,</span><span style="color: rgb(170, 4, 249);">'FontWeight'</span><span >,</span><span style="color: rgb(170, 4, 249);">'Bold'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >grid </span><span style="color: rgb(170, 4, 249);">on</span><span >, box </span><span style="color: rgb(170, 4, 249);">on</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >xlabel(</span><span style="color: rgb(170, 4, 249);">'CPU Time (s)'</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >ylabel(</span><span style="color: rgb(170, 4, 249);">'Accuracy'</span><span >)</span></span></div></div><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre"><span >title([</span><span style="color: rgb(170, 4, 249);">'Batch size: '</span><span >, num2str(bs),</span><span style="color: rgb(170, 4, 249);">', '</span><span >, </span><span style="color: rgb(170, 4, 249);">'Display frequency: '</span><span >, num2str(frequency)])</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre"><span >legend(</span><span style="color: rgb(170, 4, 249);">'sL-BFGS-TR (Train)'</span><span >, </span><span style="color: rgb(170, 4, 249);">'sL-BFGS-TR (Test)'</span><span >, </span><span style="color: rgb(170, 4, 249);">'sL-SR1-TR (Train)'</span><span >, </span><span style="color: rgb(170, 4, 249);">'sL-SR1-TR (Test)' </span><span >, </span><span style="color: rgb(170, 4, 249);">"Location"</span><span >,</span><span style="color: rgb(170, 4, 249);">"best"</span><span >)</span></span></div></div></div><div  class = 'S8'></div>
<br>
<!-- 
##### SOURCE BEGIN #####
%% *To compare* *sL-SR1-TR and sL-BFGS-TR*
% 
%% *Method 1:*
% To monitor the behavior of methods during training, we can use following statements 
% for both |sL_SR1_TR.m| (or |sL_SR1_TR_noBN.m|) |and sL_BFGS_TR.m| (or |sL_BFGS_TR_noBN.m|). 
%% *Example:*
% Let |os = 500| and |frequency = 50|. Given Cifar10 with ConvNet3FC2 in |sL_BFGS_TR.m| 
% and |sL_SR1_TR.m,| follow the steps below:
% *1. Create figures: use these statements before main loop*

plot_Train_Loss = "Yes";

if plot_Train_Loss == "Yes"
    figure(2)
    aniTrainLoss     = animatedline('Color','r');
    aniTestLoss      = animatedline('Color', 'b');
    ylim([-inf inf])
    xlabel("Iteration")
    ylabel("Loss")
    legend("Train", "Validation", 'Location',"bestoutside",'Orientation','horizontal')
    grid on
end

plot_Train_Accuracy = "Yes";

if plot_Train_Accuracy == "Yes"
    figure(3)
    aniTrainAcc      = animatedline('Color','r');
    aniTestAcc       = animatedline('Color', 'b');
    ylim([0 inf])
    xlabel("Iteration")
    ylabel("Accuracy (%)")
    legend("Train", "Validation", 'Location',"bestoutside","Orientation","horizontal")
    grid on
end
% *2. Add computed quanteties to figures: use these statements in the main loop, after evaluation the network*

if ( (k+1) == 1 || mod(k+1, frequency) == 0 || mod(k+1, Nb) == 0)

    D  = duration( 0, 0, toc(start), 'Format', 'hh:mm:ss' );
    
    %REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-> Train

    if plot_Train_Loss == "Yes"
        % training loss
        figure(2)
        addpoints( aniTrainLoss, k, f )
        title( "Number of Iterations: " + (k) + ", Elapsed Time: " + string(D) )
        drawnow
        % epoch separator
        if mod(k+1,Nb) == 0
            xline(k, ':', num2str((k+1)/Nb), 'HandleVisibility','off', 'LabelHorizontalAlignment', 'center')
        end
    end

    if plot_Train_Accuracy == "Yes"
        % training accuracy
        figure(3)
        addpoints( aniTrainAcc, k, acc )
        title( "Number of Iterations: " + (k) + ", Elapsed Time: " + string(D) )
        drawnow
        % epoch separator
        if mod(k+1,Nb) == 0
            xline(k, ':', num2str((k+1)/Nb), 'HandleVisibility','off', 'LabelHorizontalAlignment', 'center')
        end
    end

    %REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH-> Test

    figure(2)
    % testing loss
    addpoints(  aniTestLoss , k, f_test )
    drawnow

    figure(3)
    % testing accuracy
    addpoints( aniTestAcc, k, acc_test )
    drawnow
end
%% 
% 
%% *Method 2:*
% To monitor the behavior of methods after the end of training, we can also 
% use following statements for both |sL_SR1_TR.m| (or |sL_SR1_TR_noBN.m|) |and 
% sL_BFGS_TR.m| (or |sL_BFGS_TR_noBN.m|).  
%% *Example:*
% Let |os = 500| and |frequency = 50|. Given Cifar10 with ConvNet3FC2 in |sL_BFGS_TR.m| 
% and |sL_SR1_TR.m,| follow the steps below:
% *1. Save information in |.mat| with specific names as you wish*

% after running sL_SR1_TR.m

save('Info\INFO_LSR1\os500_F.mat'    ,'F')       % Overal loss of training
save('Info\INFO_LSR1\os500_F_t.mat'  ,'F_t')     % Overal loss of testing
save('Info\INFO_LSR1\os500_Acc.mat'  ,'Acc')     % Accuracy of training
save('Info\INFO_LSR1\os500_Acc_t.mat','Acc_t')   % Accuracy of testing
save('Info\INFO_LSR1\os500_Time.mat' ,'Time')    % total time (training + testing)


% after running sL_BFGS_TR.m

save('Info\INFO_LBFGS\os500_F_.mat'   ,'F')      % Overal loss of training
save('Info\INFO_LBFGS\os500_F_t.mat'  ,'F_t')    % Overal loss of testing
save('Info\INFO_LBFGS\os500_Acc.mat'  ,'Acc')    % Accuracy of training
save('Info\INFO_LBFGS\os500_Acc_t.mat','Acc_t')  % Accuracy of testing
save('Info\INFO_LBFGS\os500_Time.mat' ,'Time')   % total time (training + testing)

% *2. Produce figures*

% For the example, set:

os        = 500; 
bs        = 2*os;
epoch     = 10;
frequency = 50;
N         = 50000; 


% Specify the path of saved information: (It depends on your own path.)

cd E:\sL_QR_TR\Info  


%=================================================================
% SR1
%=================================================================

old = cd; cd INFO_LSR1

if os == 50
    load os50_F.mat
    load os50_F_t.mat
    load os50_Acc.mat
    load os50_Acc_t.mat
    load os50_Time.mat
elseif os == 250
    load os250_F.mat
    load os250_F_t.mat
    load os250_Acc.mat
    load os250_Acc_t.mat
    load os250_Time.mat

elseif os == 500
    load os500_F.mat
    load os500_F_t.mat
    load os500_Acc.mat
    load os500_Acc_t.mat
    load os500_Time.mat
elseif os == 2500
    load os2500_F.mat
    load os2500_F_t.mat
    load os2500_Acc.mat
    load os2500_Acc_t.mat
    load os2500_Time.mat
end


Nb = floor(N/os)-1;

for k = 1 : length(F_)
    if k==1 || mod(k,frequency) == 0 || mod(k,Nb) == 0
        d(1, k) = k/(Nb);      
    end
end

pos = find(d > 0); x = d(pos); clear d

figure(2)
plot(x, F_(pos), '-r', 'LineWidth',2)
hold on 
plot(x, F_t(pos), 'REPLACE_WITH_DASH_DASHr', 'LineWidth',2)


figure(3)
plot(x, Acc_(pos), '-r', 'LineWidth',2)
hold on 
plot(x, Acc_t(pos), 'REPLACE_WITH_DASH_DASHr', 'LineWidth',2)


figure(4)
plot(Time_(pos), Acc_(pos), '-r', 'LineWidth',2)
hold on
plot(Time_(pos), Acc_t(pos), 'REPLACE_WITH_DASH_DASHr', 'LineWidth',2)


%=================================================================
% BFGS
%=================================================================

cd(old), cd  INFO_LBFGS

if os == 50
    load os50_F.mat
    load os50_F_t.mat
    load os50_Acc.mat
    load os50_Acc_t.mat
    load os50_Acc_t.mat
    load os50_Time.mat
elseif os == 250
    load os250_F.mat
    load os250_F_t.mat
    load os250_Acc.mat
    load os250_Acc_t.mat
    load os250_Time.mat
elseif os == 500
    load os500_F.mat
    load os500_F_t.mat
    load os500_Acc.mat
    load os500_Acc_t.mat 
    load os500_Time.mat
elseif os == 2500
    load os2500_F.mat
    load os2500_F_t.mat
    load os2500_Acc.mat
    load os2500_Acc_t.mat
    load os2500_Time.mat
end


Nb = floor(N/os)-1;

for k = 1 : length(F_)
    if k==1 || mod(k,frequency) == 0 || mod(k,Nb) == 0
        d(1, k) = k/Nb;      
    end
end

pos = find(d > 0); x = d(pos); clear d

figure(2)
hold on
plot(x, F_(pos), '-b', 'LineWidth',2)
hold on 
plot(x, F_t(pos), 'REPLACE_WITH_DASH_DASHb', 'LineWidth',2)

set(gca, 'FontSize',24,'FontWeight','Bold');
grid on, box on, xlabel('Epoch'), ylabel('Loss')
title(['Batch size: ', num2str(bs),', ', 'Display frequency: ', num2str(frequency)])
legend('sL-SR1-TR (train)','sL-SR1-TR (test)','sL-BFGS-TR (train)','sL-BFGS-TR (test)', 'Location',"best")


figure(3)
hold on
plot(x, Acc_(pos), '-b', 'LineWidth',2)
hold on 
plot(x, Acc_t(pos), 'REPLACE_WITH_DASH_DASHb', 'LineWidth',2)
set(gca, 'FontSize',24,'FontWeight','Bold');
grid on, box on, xlabel('Epoch'), ylabel('Accuracy')
title(['Batch size: ', num2str(bs),', ', 'Display frequency: ', num2str(frequency)])
legend('sL-SR1-TR (train)','sL-SR1-TR (test)','sL-BFGS-TR (train)','sL-BFGS-TR (test)', 'Location',"best")


figure(4)
hold on
plot(Time_(pos), Acc_(pos), '-b', 'LineWidth',2)
hold on
plot(Time_(pos), Acc_t(pos), 'REPLACE_WITH_DASH_DASHb', 'LineWidth',2)





set(gca, 'FontSize',24,'FontWeight','Bold');
grid on, box on
xlabel('CPU Time (s)')
ylabel('Accuracy')
title(['Batch size: ', num2str(bs),', ', 'Display frequency: ', num2str(frequency)])
legend('sL-BFGS-TR (Train)', 'sL-BFGS-TR (Test)', 'sL-SR1-TR (Train)', 'sL-SR1-TR (Test)' , "Location","best")
%% 
%
##### SOURCE END #####
-->
</div></body></html>